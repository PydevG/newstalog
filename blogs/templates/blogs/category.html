
{% extends 'blogs/index.html' %}
{% load static %}
{% block title %}
<title>StaBlog</title>
{% endblock title %}

<body>
{% block main %}
  <main id="main">
    <section>
      <div class="container">
        <div class="row">

          <div class="col-md-9" data-aos="fade-up">
            <h3 class="category-title">Category: {{category.name}}</h3>
          {% for post in page_obj %}
            <div class="d-md-flex post-entry-2 half">
              <a href="{% url 'blogs:single-post' post.slug %}" class="me-4 thumbnail mainpost">
                <img src="{{post.image.url}}" alt="" class="img-fluid">
              </a>
              <div>
                <div class="post-meta"><span class="date">{{post.category.name }}</span> <span class="mx-1">&bullet;</span> <span>{{ post.created_at|date:"jS M Y | g:iA" }}</span></div>
                <h3><a href="{% url 'blogs:single-post' post.slug %}">{{post.title}}</a></h3>
                <p>{{post.content | truncatewords:25 }} <a href="{% url 'blogs:single-post' post.slug %}" class="text-danger">Read more</a></p>
                <div class="d-flex align-items-center author">
                  <div class="photo"><img src="{{post.author.profile.profile_picture.url}}" alt="" class="img-fluid"></div>
                  <div class="name">
                    <h3 class="m-0 p-0">{{post.author.username}}</h3>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}


            <div class="text-start py-4">
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    {% if page_obj.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page=1" aria-label="First">
          <span>&laquo;&laquo;</span> <!-- Double left arrow -->
        </a>
      </li>
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
          <span>&laquo;</span> <!-- Single left arrow -->
        </a>
      </li>
    {% endif %}

    <li class="page-item disabled">
      <span class="page-link">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
    </li>

    {% if page_obj.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
          <span>&raquo;</span> <!-- Single right arrow -->
        </a>
      </li>
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}" aria-label="Last">
          <span>&raquo;&raquo;</span> <!-- Double right arrow -->
        </a>
      </li>
    {% endif %}
  </ul>
</nav>
            </div>
          </div>

          <div class="col-md-3">
            <!-- ======= Sidebar ======= -->
            <div class="aside-block">

              <ul class="nav nav-pills custom-tab-nav mb-4" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="pills-popular-tab" data-bs-toggle="pill" data-bs-target="#pills-latest" type="button" role="tab" aria-controls="pills-popular" aria-selected="true">Latest</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="pills-trending-tab" data-bs-toggle="pill" data-bs-target="#pills-trending" type="button" role="tab" aria-controls="pills-trending" aria-selected="false">Trending</button>
                </li>
              </ul>

              <div class="tab-content" id="pills-tabContent">

                <!-- Trending -->
                <div class="tab-pane fade" id="pills-trending" role="tabpanel" aria-labelledby="pills-trending-tab">
                 {% for post in trending_posts %}
                  <div class="post-entry-1 border-bottom">
                    <div class="post-meta"><span class="date">{{post.category.name}}</span> <span class="mx-1">&bullet;</span> <span>{{ post.created_at|date:"jS M Y | g:iA" }}</span></div>
                    <h2 class="mb-2"><a href="#">{{post.title}}</a></h2>
                    <span class="author mb-3 d-block">{{post.author.username}}</span>
                  </div>
                {% endfor %}

                </div> <!-- End Trending -->

                

                <!-- Latest -->
                <div class="tab-pane fade" id="pills-latest" role="tabpanel" aria-labelledby="pills-latest-tab">
                {% for post in latest_posts %}
                  <div class="post-entry-1 border-bottom">
                    <div class="post-meta"><span class="date">{{post.category.name }}</span> <span class="mx-1">&bullet;</span> <span>{{ post.created_at|date:"jS M Y | g:iA" }}</span></div>
                    <h2 class="mb-2"><a href="">{{post.title }}</a></h2>
                    <span class="author mb-3 d-block">{{post.author.username }}</span>
                  </div>
                {% endfor %}
                </div> <!-- End Latest -->

              </div>
            </div>

            <div class="aside-block">
              <h3 class="aside-title">Categories</h3>
              <ul class="aside-links list-unstyled">
                {% for category in all_categories %}
                <li><a href="{% url 'blogs:category' category.slug %}"><i class="bi bi-chevron-right"></i>{{category.name}}</a></li>
                {% endfor %}
              </ul>
            </div><!-- End Categories -->

            <div class="aside-block">
              <h3 class="aside-title">Tags</h3>
              <ul class="aside-tags list-unstyled">
                {% for tag in post.tags.all %}
                <li><a href="{% url 'blogs:tag-posts' tag.slug%}">{{tag.name}}</a></li>
                {% endfor %}
              </ul>
            </div><!-- End Tags -->

          </div>

        </div>
      </div>
    </section>
  </main><!-- End #main -->

{% endblock main %}

</body>

</html>