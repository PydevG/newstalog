{% extends 'blogs/base.html'%}
{% load static %}


{% block main %}
  <main id="main">

    {% comment %} <!-- ======= Hero Slider Section ======= -->
    <section id="hero-slider" class="hero-slider">
      <div class="container-md" data-aos="fade-in">
        <div class="row">
          <div class="col-12">
            <div class="swiper sliderFeaturedPosts">
              <div class="swiper-wrapper">

              {% for post in slide_posts %}
                <div class="swiper-slide">
                  <a href="{% url 'blogs:single-post' post.slug %}" class="img-bg d-flex align-items-end" style="background-image: url('{{post.image.url}}');">
                    <div class="img-bg-inner">
                      <h2>{{post.title}}</h2>
                      <p>{{post.content | truncatewords:15 }}</p>
                    </div>
                  </a>
                </div>
              {% endfor %}
              </div>
              <div class="custom-swiper-button-next">
                <span class="bi-chevron-right"></span>
              </div>
              <div class="custom-swiper-button-prev">
                <span class="bi-chevron-left"></span>
              </div>

              <div class="swiper-pagination"></div>
            </div>
          </div>
        </div>
      </div>
    </section><!-- End Hero Slider Section --> {% endcomment %}

<!-- ======= Post Grid Section ======= -->
<section id="posts" class="posts">
  <div class="container" data-aos="fade-up">
    <div class="row g-5">

      <!-- HEADLINES (LEFT) -->
      <div class="col-lg-4">
        <h2 class="text-danger">HEADLINES</h2>
        {% for post in headline_posts %}
        <div class="post-entry-1 lg">
          <a href="{% url 'blogs:single-post' post.slug %}"><img src="{{ post.image.url }}" alt="" class="img-fluid"></a>
          <div class="post-meta">
            <span class="date">{{ post.category.name }}</span>
            <span class="mx-1">&bullet;</span>
            <span>{{  post.created_at|date:"jS M Y | g:iA" }}</span>
          </div>
          <h2><a href="{% url 'blogs:single-post' post.slug %}">{{ post.title }}</a></h2>
          <p class="mb-4 d-block">{{ post.content | truncatewords:55 }}</p>

          <div class="d-flex align-items-center author">
            
            <div class="photo">
              {% if post.author.profile and post.author.profile.profile_picture %}
                <img src="{{ post.author.profile.profile_picture.url }}" alt="" class="img-fluid">
              {% else %}
                <img src="{% static 'img/person-1.jpg' %}" alt="Default Profile" class="img-fluid">
              {% endif %}
            </div>
            <div class="name">
              <h3 class="m-0 p-0">{{ post.author.username }}</h3>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      
      <!-- POSTS (MIDDLE) -->
      <div class="col-lg-5">
        <b><center><h4 class="">posts with tag <span class="bg-primary text-white p-1">'{{tag.name}}'</span></h4></center></b>
        <div class="row g-5 mt-2">
          {% for post in page_obj %}
          {% if forloop.counter0|divisibleby:2 %} <!-- Start new row every 2 posts -->
          <div class="row">
          {% endif %}

            <div class="col-md-6">
              <div class="post-entry-1 mainpost">
                <a href="{% url 'blogs:single-post' post.slug %}"><img src="{{ post.image.url }}" alt="" class="img-fluid"></a>
                <div class="post-meta">
                  <span class="date">{{ post.category.name }}</span>
                  <span class="mx-1">&bullet;</span>
                  <span>{{  post.created_at|date:"jS M Y | g:iA" }}</span>
                </div>
                <h2><a href="{% url 'blogs:single-post' post.slug %}">{{ post.title }}</a></h2>
              </div>
            </div>

          {% if forloop.counter|divisibleby:2 or forloop.last %}
          </div>
          {% endif %}
          {% endfor %}



        </div>
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    {% if page_obj.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page=1" aria-label="First">
          <span>&laquo;&laquo;</span> <!-- Double left arrow -->
        </a>
      </li>
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
          <span>&laquo;</span> <!-- Single left arrow -->
        </a>
      </li>
    {% endif %}

    <li class="page-item disabled">
      <span class="page-link">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
    </li>

    {% if page_obj.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
          <span>&raquo;</span> <!-- Single right arrow -->
        </a>
      </li>
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}" aria-label="Last">
          <span>&raquo;&raquo;</span> <!-- Double right arrow -->
        </a>
      </li>
    {% endif %}
  </ul>
</nav>

      </div>


      <!-- TRENDING (RIGHT) -->
      <div class="col-lg-3">
        <div class="trending">
          <h3>Trending</h3>
          <ul class="trending-post">
            {% for post in trending_posts %}
            <li>
              <a href="{% url 'blogs:single-post' post.slug %}">
                <span class="number">{{ forloop.counter }}</span>
                <h3>{{ post.title }}</h3>
                <span class="author">{{ post.author.username }}</span>
              </a>
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>

    </div> <!-- End .row -->
  </div>
</section> <!-- End Post Grid Section -->



  </main><!-- End #main -->

{% endblock main %}